{% extends "base.html" %}

{% block title %}Line equation in 3D - K4Maths{% endblock %}

{% block head %}
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <meta name="description" content="Learn Cubed Series - Step-by-step guide with examples and practice">
  
  <!-- MathJax for LaTeX rendering -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$']],
        displayMath: [['$$', '$$']],
        processEscapes: true,
        processEnvironments: true
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      },
      svg: {
        fontCache: 'global'
      }
    };
  </script>
  <script type="text/javascript" id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
  </script>
{% endblock %}

{% block content %}
  <!-- Back navigation -->
  <a href="/VectorsCP1" class="back-to-home">üîô Back to Vectors CP1</a>

  <div class="lesson-container">

    <!-- Lesson Header -->
    <header class="lesson-header">
      <h1 class="lesson-title">3d Vectors: Equation of line
      </h1>
      <p class="lesson-subtitle">Understand and visualise the equation of a 3d vector line.</p>
      <div class="lesson-meta">
        <span class="meta-item">üìö Further Maths</span>
        <span class="meta-item">üéØ Difficulty: ‚≠ê‚≠ê‚≠ê</span>
        <span class="meta-item">‚è±Ô∏è Reading time: 15 minutes</span>
        <span class="meta-item">üìã Edexcel</span>
      </div>
    </header>

    <!-- Table of Contents -->
    <nav class="table-of-contents">
      <h3 class="toc-title">üìñ Contents</h3>
      <ul class="toc-list">
        <li class="toc-item"><a href="#introduction" class="toc-link">Introduction</a></li>
        <li class="toc-item"><a href="#key-concepts" class="toc-link">Key Concepts</a></li>
        <li class="toc-item"><a href="#examples" class="toc-link">Worked Examples</a></li>
        <li class="toc-item"><a href="#practice" class="toc-link">Practice Problems</a></li>
        <li class="toc-item"><a href="#summary" class="toc-link">Summary</a></li>
      </ul>
    </nav>

    <!-- Introduction Section -->
    <section id="introduction" class="lesson-section">
      <h2 class="section-heading">üìö Introduction</h2>
      <p class="lesson-text"> (PRIOR KNOWLEDGE OF VECTORS IS HIGHLY RECCOMENDED) In this lesson, we will explore the equation of a line in 3D space, represented by a vector equation. We will learn how to derive the vector equation of a line from its parametric equations (functions of variables) and understand the geometric interpretation of the line in three-dimensional space.</p>
      <div class="definition-box">
        <h4 class="box-title">üéØ Learning Objectives</h4>
        <ul class="lesson-text">
          <li>Understand the concept of a line in 3D space</li>
          <li>Learn how to derive the vector equation of a line from its parametric equations</li>
          <li>Visualize the geometric interpretation of a line in three-dimensional space</li>
        </ul>
        <p class = "lesson-text">
            You will have met vectors in normal A-Level Maths, but in Further Maths you will go deeper into the topic. This lesson is part of the Vectors CP1 module, which is a core part of the Further Maths curriculum.<br><br>I found 3D vectors to be quite challenging, hence the 4 star difficulty rating. This was mainly due to the fact that textbooks aren't the greatest for visualisations, so watching videos alongside this lesson is highly recommended. I strongly reccomend ExamSolutions on YouTube.
        </p>
      </div>
    </section>

    <!-- Key Concepts Section -->
    <section id="key-concepts" class="lesson-section">
      <h2 class="section-heading">üîë Key Concepts</h2>
      
      <h3 class="subsection-heading">Equation of a line in 3D</h3>
      <p class="lesson-text">
        The equation of a line in 3D can be represented using a vector equation. The general form of the vector equation of a line is given by:
      </p>
      <div class="math-display">
        $$\mathbf{r} = \mathbf{a} + \lambda \mathbf{b}$$
      </div>
      <p class="lesson-text">
        Where:<br>
          $\mathbf{r} \quad$ is the position vector of any point on the line<br>
          $\mathbf{a} \quad$ is the position vector of a specific point on the line<br>
          $\mathbf{b} \quad$ is the direction vector of the line<br>
          $\lambda \quad$ is a scalar parameter/quantity
          <br><br>
          A position vector ($\mathbf{r}$) is just a vector that starts at the origin, $(0,0,0)$ and goes anywhere else.<br><br>
          A direction vector ($\mathbf{b}$) is just the vector that shows direction.<br><br>
          A scalar ($\lambda$) is just a number that acts like a multiplier, increasing or decreasing the line length.
          <br><br><br>
          (Above) is the way everyone else teaches it, but i think this is much more intuitive:
      </p>
      <div class="math-display">
        $$\mathbf{r} = \overrightarrow{OA} + \lambda \overrightarrow{AB}$$
      </div>
      <p class="lesson-text">
        Where:<br>
        $A$ is a point on the line, so $\overrightarrow{OA}$ is the position vector from origin to point A
        <br>$B$ is another point on the line, so $\overrightarrow{AB}$ is from point A to point B, and is the direction vector
          <
        <br>$O$ is the origin, $(0,0,0)$
          <br><br>
          This means that you start at point A, and then move in the direction of vector AB, scaled by $\lambda$.<br> By changing the value of $\lambda$, you can move along the line in both directions.
          <br><br>I created a great visualisation:        </p>
          <div style="display: flex; justify-content: center; margin: 10px 0;">
            <iframe src="https://www.desmos.com/calculator/xlkryzow7n?embed" width="1000" height="450" style="border: 1px solid #79137dcd" frameborder=0></iframe>
          </div>
          <p class="lesson-text">
            In the above, the purple line is the result of $\overrightarrow{OA} + \lambda \overrightarrow{AB}$, which is $\mathbf{r}$.
          </p>
    </section>

    <!-- more Concepts Section -->
    <section id="more-concepts" class="lesson-section">
      <h2 class="section-heading">üîë More Concepts</h2>
      <h3 class="subsection-heading">3D must-knows</h3>
      <p class="lesson-text">
        Coordinates in a 3D space is represented just like it is in 2D, but with an extra z axis in in the mix, to account for the 3rd dimension.<br>
        For example: 2D coordinates: (x, y) <br> 3D coordinates: $(x, y, z) \quad \rightarrow \quad$ Example: $(3, -2, 5)$
        <br><br> Furthermore
        <br> There are multiple forms of vectors, ijk form:
        <br><br>
        In $ijk$ form, a point in 3D space is represented as:
        $$\mathbf{r} = xi + yj + zk$$
        <br><br> Column form:
        $$\begin{bmatrix} x \\ y \\ z \end{bmatrix}$$
        <br> For example:
        <div class="math-display">
          $$\text{The position vector from origin to point } (3, -2, 5) \text{ is:}$$
          $$\text{Column form: }\begin{bmatrix} 3 \\ -2 \\ 5 \end{bmatrix} \quad | \quad ijk \text{ form: } 3i - 2j + 5k$$
      </p>
    </section>

    <!-- Worked Examples Section -->
    <section id="examples" class="lesson-section">
      <h2 class="section-heading">üìù Worked Examples</h2>
      
      <div class="example-box">
        <h4 class="box-title">üìã Example 1: Simple example:</h4>
        <p class="lesson-text">We have two points: A and B, which are $(4, 5, -7)$ and $(1, 2, 3)$ respectively. Find the equation of a line passing through these points.</p>
        <div style="display: flex; justify-content: center; margin: 20px 0;">
        </div>
        <div class="solution-steps">
          <h5 class="subsection-heading">Solution:</h5>
          <div class="step">
            <div class="step-number">Step 1:</div>
            <p class="lesson-text">Recall the formula:</p>
            <div class="math-display">
              $$r = \overrightarrow{OA} + \lambda \overrightarrow{AB} \quad \text{or} \quad r = \mathbf{a} + \lambda \mathbf{b}$$
              $$\text{Where: } \overrightarrow{OA} = a, \overrightarrow{AB} = b$$
              $$\overrightarrow{OA} \text{ is simply the position vector from origin to point A}$$
              $$\overrightarrow{OA} = \begin{bmatrix} 4 \\ 5 \\ -7 \end{bmatrix} \quad \text{or,} \quad = 4i + 5j - 7k$$
            </div>
          </div>

          <div class="step">
            <div class="step-number">Step 2:</div>
            <p class="lesson-text">Lets now find AB.</p>
            <div class="math-display">
              $${\small \text{To find } \overrightarrow{AB}, \text{think of it as going from point A to the origin, to point B.}}$$
              $${\small \text{OA is origin to A. we want AB. so we start from A,}}$$
              $${\small \text{ and go back to origin then to B.}}$$
              $${\small \text{From A to origin is just negative OA: }} -\overrightarrow{OA} = -\begin{bmatrix} 4 \\ 5 \\ -7 \end{bmatrix} = \begin{bmatrix} -4 \\ -5 \\ 7 \end{bmatrix}$$
              $${\small \text{Then from origin to B is just OB: }} \overrightarrow{OB} = \begin{bmatrix} 1 \\ 2 \\ 3 \end{bmatrix}$$
              $${\small \text{So: }} \overrightarrow{AB} = -\overrightarrow{OA} + \overrightarrow{OB} \rightarrow \begin{bmatrix} -4 \\ -5 \\ 7 \end{bmatrix} + \begin{bmatrix} 1 \\ 2 \\ 3 \end{bmatrix} = \begin{bmatrix} -3 \\ -3 \\ 10 \end{bmatrix}$$
              $${\small \text{(just add/subtract the x y and z components separately.)}}$$
            </div>
            </div>
            <div class ="step">
            <div class="step-number">Step 3:</div>
            <p class="lesson-text">Now we can write the full equation of the line:</p>
            <div class="math-display">
              $$r = \overrightarrow{OA} + \lambda \overrightarrow{AB}$$
              $${\small \text{We found: }} \overrightarrow{OA} = \begin{bmatrix} 4 \\ 5 \\ -7 \end{bmatrix} {\small \text{ and }} \overrightarrow{AB} = \begin{bmatrix} -3 \\ -3 \\ 10 \end{bmatrix}$$
              $${\small \text{So: }} r = \begin{bmatrix} 4 \\ 5 \\ -7 \end{bmatrix} + \lambda \begin{bmatrix} -3 \\ -3 \\ 10 \end{bmatrix}$$
              $${\small \text{Or in ijk form: }} r = (4i + 5j - 7k) + \lambda (-3i - 3j + 10k)$$
              $${\small \text{This is the equation of the line passing through points A and B.}}$$
              $${\small \text{ We can also write it as: }}$$
              $$\boxed{\mathbf{r} = \begin{bmatrix} 4 - 3\lambda \\ 5 - 3\lambda \\ -7 + 10\lambda \end{bmatrix}}$$
            </div>
          </div>
        </div>
      </div>
            <p class = "lesson-text">
              For this line to intersect a point, the point must satisfy the equation of the line. The way we can check this is by finding lambda and seeing if it is the same for all: $x$, $y$ and $z$.<br>
              <br>This means that the point must be a multiple of the direction vector, $\overrightarrow{AB}$.<br>
              <br>For example, the point $C \rightarrow \begin{bmatrix} 1 \\ 2 \\ 3 \end{bmatrix}$, and a direction vector is $\lambda \begin{bmatrix} -1 \\ -2 \\ -3 \end{bmatrix}$.<br>
              <br>We can solve for $\lambda$ in each, $x$, $y$ and $z$. if $\lambda$ is the same for all three, then the point lies on the line.<br>
            <br> In this case, $\lambda = -1$, and is consistent for each $x$,$y$ and $z$ meaning C lies on the line.</p>

      <div class="example-box">
        <h4 class="box-title">üìã Example 2: Line intersecting a point</h4>
        <p class="lesson-text">The straight line $r = (6i + 3j + k) + \lambda (-3i - 3j + 10k)$ intersects point $C = (a, b, 4)$. Find the values of $a$ and $b$.</p>
        <div style="display: flex; justify-content: center; margin: 20px 0;">
        </div>
        <div class="solution-steps">
          <h5 class="subsection-heading">Solution:</h5>
          <div class="step">
            <div class="step-number">Step 1:</div>
            <p class="lesson-text">Understand that $C$ must be a multiple of the direction vector $\lambda (-3i - 3j + 10k)$.</p>
            <div class="math-display">
              $$\text{since we have: } C = (a, b, 4)\text{, we have the z value.}$$
              $$\text{set the z component of the line equal to 4 and solve.}$$
              $$\lambda(10k) = 4, \rightarrow \lambda = \underline{\frac{4}{10} = \frac{2}{5}}$$
            </div>
          </div>
          <div class="step">
            <div class="step-number">Step 2:</div>
            <p class="lesson-text">Now we have $\lambda$ we can find $a$ and $b$:</p>
            <div class="math-display">
              $$\lambda = \frac{2}{5}$$
              $$\text{So plug this into the direction vector of the line:}$$
              $$\lambda \begin{bmatrix} -3 \\ -3 \\ 10 \end{bmatrix} \rightarrow \begin{bmatrix} -3 \lambda \\ -3 \lambda \\ 10 \lambda \end{bmatrix} = \begin{bmatrix} -3 \times \frac{2}{5} \\ -3 \times \frac{2}{5} \\ 10 \times \frac{2}{5} \end{bmatrix} = \begin{bmatrix} -\frac{6}{5} \\ -\frac{6}{5} \\ 4 \end{bmatrix}$$
              $$\text{Ensure you compute x, y and z separately.}$$
            </div>
          </div>
          <div class="step">
            <div class="step-number">Step 3:</div>
            <p class="lesson-text">Final Answer:</p>
            <div class="math-display">
              $$\boxed{C = \begin{bmatrix} -\frac{6}{5} \\ -\frac{6}{5} \\ 4 \end{bmatrix}}$$
            </div>
      </div>
      </div>
      </div>
            <h3 class="subsection-heading">Cartesian form of Straight line</h3>
            <p class = "lesson-text">
              The straight line equation that we have just been working with - $ r = \mathbf{a} + \lambda \mathbf{b} $ - has Cartesian form.<br>
              <br>The cartesian form is:
            </p>
            <div class = "math-display">
              $$\underbrace{r =  (a_1,a_2,a_3) + \lambda (b_1,b_2,b_3)}_{\text{parametric form}} \quad \rightarrow \quad \underbrace{\frac{x - a_1}{b_1} = \frac{y - a_2}{b_2} = \frac{z - a_3}{b_3}}_{\text{cartesian form}}$$
            </div>
            <p clas ="lesson-text">Each of the fractions in the cartesian form are equal to $\lambda$</p>
            <p class = "lesson-text"> Proof:</p>
    </section>

    <!-- Common Mistakes Section -->
    <section class="lesson-section">
      <h2 class="section-heading">‚ö†Ô∏è Common Mistakes</h2>
      <div class="warning-box">
        <h4 class="box-title">üö´ Mistake 1: Forgetting the formulae</h4>
        <p class="lesson-text">
          <strong>What students often do wrong:</strong> Just remember the formulae for sum and product of roots. They are easy to forget.
          $$\alpha + \beta = -\frac{b}{a}$$
          $$\alpha \beta = \frac{c}{a}$$
        </p>
        </div>
    </section>

    <!-- Practice Problems Section -->
    <section id="practice" class="lesson-section">
      <h2 class="section-heading">üí™ Practice Problems</h2>
      <p class="lesson-text lesson-text-center">
        Try these problems to test your understanding:
      </p>

      <div class="example-box">
        <h4 class="box-title">üéØ Practice Questions A</h4>
        <p class="lesson-text">
          <strong>Part 1:</strong> Œ± and Œ≤ are the roots of the quadratic equation $7x^2 - 3x + 1 = 0$. Without solving the equation, find the values of:<br>
          A. $\alpha + \beta$<br>
          B. $\alpha\beta$<br>
          C. $\frac{1}{\alpha} + \frac{1}{\beta}$<br>
          D. $\alpha^2 + \beta^2$<br><br>

          <strong>Part 2:</strong> Œ± and Œ≤ are the roots of the quadratic equation $6x^2 - 9x + 2 = 0$. Without solving the equation, find the values of:<br>
          A. $\alpha + \beta$<br>
          B. $\alpha^2 \times \beta^2$<br>
          C. $\frac{1}{\alpha} + \frac{1}{\beta}$<br>
          D. $\alpha^3 + \beta^3$
        </p>
        <details style="margin-top: 15px;">
          <summary style="cursor: pointer; color: var(--accent-blue); font-weight: 600;">üîç Show Solution</summary>
          <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(74, 158, 255, 0.2);">
        <div class="math-display">
          <strong>Part 1:</strong> For $7x^2 - 3x + 1 = 0$, we have $a = 7$, $b = -3$, $c = 1$
          $$\text{A. } \alpha + \beta = -\frac{b}{a} = -\frac{(-3)}{7} = \frac{3}{7}$$
          $$\text{B. } \alpha\beta = \frac{c}{a} = \frac{1}{7}$$
          $$\text{C. } \frac{1}{\alpha} + \frac{1}{\beta} = \frac{\alpha + \beta}{\alpha\beta} = \frac{\frac{3}{7}}{\frac{1}{7}} = 3$$
          $$\text{D. } \alpha^2 + \beta^2 = (\alpha + \beta)^2 - 2\alpha\beta = \left(\frac{3}{7}\right)^2 - 2 \cdot \frac{1}{7} = \frac{9}{49} - \frac{2}{7} = \frac{9 - 14}{49} $$
          $$= -\frac{5}{49}$$
        </div>
        <br>
        <div class="math-display">
          <strong>Part 2:</strong> For $6x^2 - 9x + 2 = 0$, we have $a = 6$, $b = -9$, $c = 2$
          $$\text{A. } \alpha + \beta = -\frac{b}{a} = -\frac{(-9)}{6} = \frac{9}{6} = \frac{3}{2}$$
          $$\text{B. } \alpha^2 \times \beta^2 = (\alpha\beta)^2 = \left(\frac{c}{a}\right)^2 = \left(\frac{2}{6}\right)^2 = \left(\frac{1}{3}\right)^2 = \frac{1}{9}$$
          $$\text{C. } \frac{1}{\alpha} + \frac{1}{\beta} = \frac{\alpha + \beta}{\alpha\beta} = \frac{\frac{3}{2}}{\frac{1}{3}} = \frac{3}{2} \times 3 = \frac{9}{2}$$
          $$\text{D. } \alpha^3 + \beta^3 = (\alpha + \beta)^3 - 3\alpha\beta(\alpha + \beta) = \left(\frac{3}{2}\right)^3 - 3 \cdot \frac{1}{3} \cdot \frac{3}{2} = \frac{27}{8} - \frac{3}{2} $$
          $$= \frac{27 - 12}{8} = \frac{15}{8}$$
        </div>
          </div>
        </details>
      </div>

      <div class="example-box">
        <h4 class="box-title">üéØ Practice Questions B</h4>
        <p class="lesson-text">
          <strong>Question 1:</strong> The roots of the quadratic equation $px^2 + qx + r = 0$ are $\alpha = \frac{2 + \sqrt{5}}{3}$ and $\beta = \frac{2 - \sqrt{5}}{3}$. Find integer values of $p$, $q$ and $r$.<br><br>

          <strong>Question 2:</strong> One root of the quadratic $ax^2 + bx + c = 0$ is $\alpha = 3 - 2i$.<br>
          a) Write down the other root $\beta$.<br>
          b) If $a = 2$, find the integers $b$ and $c$.<br><br>

          <strong>Question 3:</strong> Given that $kx^2 + (k+4)x - 6 = 0$, find the integer value of $k$ if the product of the roots is $-2$.<br><br>

        </p>
        <details style="margin-top: 15px;">
          <summary style="cursor: pointer; color: var(--accent-blue); font-weight: 600;">üîç Show Solution</summary>
          <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(74, 158, 255, 0.2);">
        <div class="math-display">
          <strong>Question 1 Solution:</strong>
          $$\alpha + \beta = \frac{2 + \sqrt{5}}{3} + \frac{2 - \sqrt{5}}{3} = \frac{4}{3}$$
          $$\alpha \beta = \frac{2 + \sqrt{5}}{3} \times \frac{2 - \sqrt{5}}{3} = \frac{(2 + \sqrt{5})(2 - \sqrt{5})}{9} = \frac{4 - 5}{9} = -\frac{1}{9}$$
          $$\text{Using } \alpha + \beta = -\frac{q}{p} \text{ and } \alpha\beta = \frac{r}{p}:$$
          $$-\frac{q}{p} = \frac{4}{3} \Rightarrow q = -\frac{4p}{3}$$
          $$\frac{r}{p} = -\frac{1}{9} \Rightarrow r = -\frac{p}{9}$$
          $$\text{For integer values, let } p = 9: \text{ then } q = -12, r = -1$$
          $$\boxed{p = 9, q = -12, r = -1}$$
        </div>
        <br>
        <div class="math-display">
          <strong>Question 2 Solution:</strong>
          $$\text{a) Since complex roots come in conjugate pairs: } \boxed{\beta = 3 + 2i}$$
          $$\text{b) } \alpha + \beta = (3 - 2i) + (3 + 2i) = 6$$
          $$\alpha \beta = (3 - 2i)(3 + 2i) = 9 - (2i)^2 = 9 + 4 = 13$$
          $$\text{With } a = 2: \alpha + \beta = -\frac{b}{a} = -\frac{b}{2} = 6 \Rightarrow b = -12$$
          $$\alpha \beta = \frac{c}{a} = \frac{c}{2} = 13 \Rightarrow c = 26$$
          $$\boxed{b = -12, c = 26}$$
        </div>
        <br>
        <div class="math-display">
          <strong>Question 3 Solution:</strong>
          $$\text{For } kx^2 + (k+4)x - 6 = 0: a = k, b = k+4, c = -6$$
          $$\text{Product of roots } = \frac{c}{a} = \frac{-6}{k} = -2$$
          $$\frac{-6}{k} = -2 \Rightarrow k = 3$$
          $$\boxed{k = 3}$$
        </div>
        <br>
          </div>
        </details>
      </div>

        <!-- Summary Section -->
        <section id="summary" class="lesson-section">
          <h2 class="section-heading">üìã Summary</h2>
          <div class="definition-box">
          <h4 class="box-title">üéØ Key Takeaways</h4>
          <ul class="lesson-text">
            <li>The sum of roots formula: $\alpha + \beta = -\frac{b}{a}$</li>
            <li>The product of roots formula: $\alpha \beta = \frac{c}{a}$</li>
            <li>These formulae work for any quadratic equation in the form $ax^2 + bx + c = 0$</li>
            <li>You can find coefficients when given the roots using these relationships</li>
            <li>Complex roots come in conjugate pairs for real coefficient quadratics</li>
            <li>These relationships are part of Vieta's formulae for polynomials</li>
          </ul>
          </div>
          <div class="tip-box">
          <h4 class="box-title">üìö What's Next?</h4>
          <p class="lesson-text">
            Now that you've mastered quadratic roots, it's time to explore the more complex world of cubic equations. Learn about the sum and product relationships for three roots and tackle more challenging polynomial problems.
          </p>
          <p class="lesson-text">
            <a href="/RootsOfCubicEquations" >üöÄ Continue to Roots of Cubic Equations</a>
          </p>
          </div>
        </section>

    <!-- Back to top button -->
    <div style="text-align: center; margin: 30px 0;">
      <a href="#top" class="nav-button">‚¨ÜÔ∏è Back to Top</a>
    </div>

  </div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Smooth scrolling for table of contents
    const tocLinks = document.querySelectorAll('.toc-link');
    tocLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            const targetElement = document.querySelector(targetId);
            if (targetElement) {
                targetElement.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // Highlight current section in table of contents
    const sections = document.querySelectorAll('.lesson-section');
    const tocNavLinks = document.querySelectorAll('.toc-link');
    
    function highlightTOC() {
        let current = '';
        sections.forEach(section => {
            const sectionTop = section.offsetTop;
            const sectionHeight = section.clientHeight;
            if (window.pageYOffset >= (sectionTop - 200)) {
                current = section.getAttribute('id');
            }
        });
        
        tocNavLinks.forEach(link => {
            link.style.background = '';
            link.style.borderLeftColor = 'transparent';
            if (link.getAttribute('href') === '#' + current) {
                link.style.background = 'rgba(74, 158, 255, 0.1)';
                link.style.borderLeftColor = 'var(--accent-blue)';
            }
        });
    }
    
    window.addEventListener('scroll', highlightTOC);
    
    // Initialize MathJax rendering
    if (window.MathJax) {
        MathJax.typesetPromise().then(() => {
            console.log('MathJax rendering complete');
        });
    }
});
</script>
{% endblock %}